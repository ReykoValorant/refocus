<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Refocus - In Game</title>
<link rel="stylesheet" href="fonts/fonts.css">

<style>
  :root {
    --orange:      #e6a587;
    --coral:       #f0967a;
    --pink:        #eb5062;

    --grad-warm:   linear-gradient(135deg, var(--orange), var(--coral));
    --grad-hot:    linear-gradient(135deg, var(--coral), var(--pink));

    --glow-coral:  rgba(240,150,122,0.38);
    --glow-pink:   rgba(235,80,98,0.52);

    --bg:   rgba(0, 0, 0, 0.93);
    --bg2:  rgba(2, 1, 1, 0.97);

    --text:  rgba(255,255,255,0.97);
    --sub:   rgba(255,255,255,0.55);

    --font-h: 'Barlow Condensed', sans-serif;
    --font-b: 'Barlow', sans-serif;

    --snap:  cubic-bezier(.12, 1, .28, 1);
    --land:  cubic-bezier(.2, .9, .2, 1);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: transparent;
    font-family: var(--font-b);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  .wrap {
    width: 420px;
    position: relative;
    overflow: visible;
  }

  /* ── TOAST CARD ── */
  .toast {
    width: 420px;
    border-radius: 11px;
    position: relative;
    overflow: hidden;

    background:
      radial-gradient(360px 160px at 92% -10%, rgba(240,150,122,0.13), transparent 58%),
      radial-gradient(280px 180px at 8%  110%, rgba(235,80,98,0.11),   transparent 62%),
      linear-gradient(160deg, rgba(8,6,6,0.96), rgba(2,1,1,0.98));

    backdrop-filter: blur(14px) saturate(1.4);
    -webkit-backdrop-filter: blur(14px) saturate(1.4);

    border: 1px solid rgba(255,255,255,0.07);
    box-shadow:
      0 22px 55px rgba(0,0,0,0.75),
      0 0 0 1px rgba(255,255,255,0.035) inset;

    /* Hidden state: starts higher, slightly smaller */
    opacity: 0;
    transform: translateY(-14px) scale(0.992);
    transition:
      opacity   560ms var(--land),
      transform 640ms var(--snap),
      box-shadow 640ms var(--land);
  }

  /* ── LEFT ACCENT STRIPE ── */
  .toast::before {
    content: "";
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 3px;
    background: linear-gradient(180deg,
      rgba(230,165,135,0.90) 0%,
      rgba(240,150,122,1.00) 40%,
      rgba(235,80,98,1.00)  100%);
    box-shadow:
      0 0 18px rgba(240,150,122,0.50),
      0 0 8px  rgba(235,80,98,0.35);
    z-index: 5;
  }

  /* ── SHOWN STATE ── */
  .toast.show {
    opacity: 1;
    transform: translateY(0) scale(1);
    box-shadow:
      0 26px 60px rgba(0,0,0,0.80),
      0 0 0 1px rgba(255,255,255,0.05) inset,
      0 0 0 1px rgba(235,80,98,0.22) inset,
      0 0 32px rgba(235,80,98,0.18),
      0 0 18px rgba(240,150,122,0.14);
  }

  /* ── SHEEN ── */
  .sweep {
    position: absolute; inset: 0;
    background: linear-gradient(108deg,
      transparent 0%,
      rgba(255,255,255,0.048) 42%,
      transparent 72%);
    opacity: 0;
    transform: translateX(-100%);
    pointer-events: none;
    mix-blend-mode: screen;
    z-index: 4;
  }
  .toast.show .sweep {
    animation: sheenPass 800ms var(--land) 100ms 1 forwards;
  }
  @keyframes sheenPass {
    0%   { opacity: 0;    transform: translateX(-100%); }
    20%  { opacity: 1; }
    100% { opacity: 0;    transform: translateX(100%); }
  }

  /* ── AMBIENT GLOW ── */
  .ambient {
    position: absolute;
    top: -55px; right: -55px;
    width: 190px; height: 190px;
    border-radius: 999px;
    background: radial-gradient(circle, rgba(240,150,122,0.12) 0%, transparent 68%);
    pointer-events: none; z-index: 0;
    opacity: 0;
    transition: opacity 500ms var(--land);
  }
  .toast.show .ambient { opacity: 1; }

  /* ── INNER LAYOUT ── */
  .inner {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 11px 14px 13px 15px;
    position: relative;
    z-index: 2;
  }

  /* ── ICON ── */
  .icon {
    width: 30px; height: 30px;
    border-radius: 8px;
    overflow: hidden; flex: 0 0 auto;
    margin-top: 2px;
    border: 1px solid rgba(255,255,255,0.08);
    background: rgba(0,0,0,0.40);
    box-shadow:
      0 0 0 1px rgba(240,150,122,0.12) inset,
      0 5px 14px rgba(0,0,0,0.55);
    opacity: 0;
    transform: scale(0.88);
    transition:
      opacity   300ms var(--land) 160ms,
      transform 360ms var(--snap) 160ms,
      box-shadow 500ms;
  }
  .toast.show .icon {
    opacity: 1;
    transform: scale(1);
    animation: iconPulse 3.2s ease-in-out 600ms infinite;
  }
  .icon img { width: 100%; height: 100%; display: block; object-fit: cover; }
  @keyframes iconPulse {
    0%,100% { box-shadow: 0 0 0 1px rgba(240,150,122,0.12) inset, 0 5px 14px rgba(0,0,0,0.55); }
    50%     { box-shadow: 0 0 0 1px rgba(240,150,122,0.28) inset, 0 5px 14px rgba(0,0,0,0.55), 0 0 12px rgba(240,150,122,0.16); }
  }

  /* ── CONTENT ── */
  .content {
    flex: 1; min-width: 0;
    display: flex; flex-direction: column;
  }

  /* Top row */
  .top-row {
    display: flex; align-items: center; justify-content: space-between; gap: 6px;
    margin-bottom: 6px;
  }

  .brand-name {
    font-family: var(--font-h);
    font-size: 9.5px; font-weight: 700;
    letter-spacing: 2.4px; text-transform: uppercase;
    color: rgba(255,255,255,0.40); line-height: 1;
  }

  .type-badge {
    font-family: var(--font-h);
    font-size: 8.5px; font-weight: 700;
    letter-spacing: 1.4px; text-transform: uppercase;
    padding: 2px 6px; border-radius: 3px;
    background: linear-gradient(135deg, rgba(240,150,122,0.10), rgba(235,80,98,0.13));
    border: 1px solid rgba(235,80,98,0.28);
    color: rgba(255,185,175,0.85); white-space: nowrap; line-height: 1.5;
  }

  /* ── MESSAGE TEXT ── */
  .msg {
    font-family: var(--font-h);
    font-size: 20px;
    font-weight: 700;
    letter-spacing: 0.2px;
    line-height: 1.24;
    color: var(--text);
    text-shadow: 0 1px 4px rgba(0,0,0,0.50);

    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;

    opacity: 0;
    transform: translateY(8px);
    transition:
      opacity   340ms var(--land) 180ms,
      transform 420ms var(--snap) 180ms;
  }
  .toast.show .msg {
    opacity: 1;
    transform: translateY(0);
  }

  /* ── PROGRESS BAR ── */
  .bar-track {
    position: absolute;
    left: 3px; right: 0; bottom: 0;
    height: 2px;
    background: rgba(255,255,255,0.05);
    overflow: hidden; z-index: 6;
  }

  .bar-fill {
    height: 100%; width: 100%;
    background: linear-gradient(90deg,
      var(--orange) 0%,
      var(--coral)  50%,
      var(--pink)   100%);
    transform-origin: left center;
    transform: scaleX(1);
    box-shadow:
      0 0 10px rgba(235,80,98,0.50),
      0 0 5px  rgba(240,150,122,0.40);
    animation: none;
  }
  .run .bar-fill { animation: barShrink linear forwards; }
  @keyframes barShrink {
    from { transform: scaleX(1); }
    to   { transform: scaleX(0); }
  }

  /* ── SCANLINES ── */
  .toast::after {
    content: "";
    position: absolute; inset: 0;
    background-image: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 3px,
      rgba(255,255,255,0.005) 3px,
      rgba(255,255,255,0.005) 4px
    );
    pointer-events: none; z-index: 1;
  }
</style>
</head>

<body>
  <div class="wrap">
    <div class="toast" id="toast">

      <div class="sweep"></div>
      <div class="ambient"></div>

      <div class="inner">
        <div class="icon">
          <img src="launcher_icon.ico" alt="">
        </div>
        <div class="content">
          <div class="top-row">
            <div class="brand-name">REFOCUS</div>
            <div class="type-badge" id="badge">Focus</div>
          </div>
          <div class="msg" id="msg">...</div>
        </div>
      </div>

      <div class="bar-track">
        <div class="bar-fill" id="barFill"></div>
      </div>

    </div>
  </div>

<script>
  var toast   = document.getElementById("toast");
  var badge   = document.getElementById("badge");
  var msg     = document.getElementById("msg");
  var barFill = document.getElementById("barFill");

  function hasWord(hay, needle) {
    return String(hay || "").toLowerCase().indexOf(String(needle || "").toLowerCase()) !== -1;
  }

  function setTypeClass(type) {
    toast.classList.remove("t-focus", "t-tilt", "t-death");
    var t = String(type || "FOCUS").toLowerCase();
    if (hasWord(t, "death"))     toast.classList.add("t-death");
    else if (hasWord(t, "tilt")) toast.classList.add("t-tilt");
    else                         toast.classList.add("t-focus");
  }

  function showToast(text, type, durationMs) {
    var dur = Number(durationMs || 6500);

    msg.textContent   = text || "...";
    badge.textContent = String(type || "FOCUS").toUpperCase();
    setTypeClass(type);

    /* Reset entry animation */
    toast.classList.remove("show");
    toast.offsetHeight;

    /* Reset progress bar */
    toast.classList.remove("run");
    barFill.style.animation = "none";
    barFill.offsetHeight;
    barFill.style.animation = "";

    barFill.style.animationDuration = (dur / 1000).toFixed(2) + "s";
    toast.classList.add("run");

    /* Show */
    toast.classList.add("show");

    /* Auto-hide */
    setTimeout(function () {
      toast.classList.remove("show");
    }, dur);
  }

  overwolf.windows.onMessageReceived.addListener(function (e) {
    if (!e || e.id !== "toast") return;
    var c = e.content || {};
    showToast(c.text, c.type, c.durationMs);
  });
</script>
</body>
</html>
